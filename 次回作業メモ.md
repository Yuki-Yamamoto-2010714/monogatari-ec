# 次回作業クイックガイド

**作成日**: 2025年11月25日

---

## 🚀 クイックスタート（次回再開時）

### 1. 開発サーバーを起動

```bash
cd /Users/yamamotoyuuki/Desktop/なんちゃれ/monogatari-ec
npm run dev
```

サーバーが起動したら：
- **フロントエンド**: http://localhost:3001
- **Sanityスタジオ**: http://localhost:3001/studio

---

## 📋 やるべきこと（優先順）

### ✅ 即実行：データ表示確認

ブラウザで以下のページを開いて、データが表示されるか確認：

1. http://localhost:3001/artisans → 山田一郎、佐藤花子が表示されるか？
2. http://localhost:3001/products → 商品3点が表示されるか？
3. http://localhost:3001/stories → ストーリー2本が表示されるか？

**もし表示されない場合：**
- ブラウザのコンソール（F12）でエラー確認
- Cmd + Shift + R でハードリフレッシュ
- Sanityスタジオ (http://localhost:3001/studio) でデータが存在するか確認

---

## 🌐 デプロイ手順（GitHub → Vercel）

### ステップ1: GitHubリポジトリ作成

1. https://github.com/new にアクセス
2. Repository name: `monogatari-ec`
3. Public を選択（QRコードで公開するため）
4. 「Create repository」をクリック

### ステップ2: コードをプッシュ

```bash
cd /Users/yamamotoyuuki/Desktop/なんちゃれ/monogatari-ec
git add .
git commit -m "feat: Complete Monogatari EC implementation"
git remote add origin https://github.com/<あなたのユーザー名>/monogatari-ec.git
git branch -M main
git push -u origin main
```

### ステップ3: Vercelでデプロイ

1. **https://vercel.com** にアクセス
2. 「Continue with GitHub」でログイン
3. 「Add New」→「Project」をクリック
4. 「Import Git Repository」から `monogatari-ec` を選択
5. **環境変数を設定**（重要！）:
   ```
   NEXT_PUBLIC_SANITY_PROJECT_ID=oa68x7h8
   NEXT_PUBLIC_SANITY_DATASET=production
   ```
6. 「Deploy」をクリック
7. デプロイ完了まで待つ（2-3分）
8. **デプロイ完了後のURLをコピー**（例: `https://monogatari-ec-xxxx.vercel.app`）

### ステップ4: Sanity CORS設定（本番URL）

1. **https://www.sanity.io/manage** にアクセス
2. 「なんちゃれ」プロジェクトを選択
3. 左メニュー「API」→「CORS Origins」
4. 「Add CORS origin」をクリック
5. VercelのURL（例: `https://monogatari-ec-xxxx.vercel.app`）を入力
6. 「Allow credentials」にチェック
7. 「Save」をクリック

### ステップ5: QRコード生成

1. **https://www.qr-code-generator.com/** にアクセス
2. 「URL」を選択
3. VercelのURLを貼り付け
4. デザインを選択（色、ロゴなど）
5. 「Download」をクリック
6. QRコードを保存

---

## 🎯 デモ準備チェックリスト

プレゼン前に確認すべき項目：

- [ ] VercelでサイトがSSL（https）で動作している
- [ ] 全ページが正常に表示される
  - [ ] トップページ
  - [ ] 職人一覧・詳細
  - [ ] 商品一覧・詳細
  - [ ] ストーリー一覧・詳細
  - [ ] カート機能
- [ ] スマートフォンでQRコードからアクセスできる
- [ ] スクローリーテリングが正常に動作する
- [ ] 商品のカート追加が動作する
- [ ] レスポンシブデザインが正常（スマホ、タブレット、PC）

---

## 🔧 トラブルシューティング

### データが表示されない場合

#### 原因1: ドキュメントが公開されていない
**解決方法**: Sanityスタジオで各ドキュメントを開き、「Publish」ボタンをクリック

#### 原因2: CORS設定が不足
**解決方法**: Sanity管理画面でCORS Originを確認
- `http://localhost:3001` が登録されているか？
- 本番環境の場合、VercelのURLが登録されているか？

#### 原因3: 環境変数が間違っている
**解決方法**: `.env.local`を確認
```
NEXT_PUBLIC_SANITY_PROJECT_ID=oa68x7h8
NEXT_PUBLIC_SANITY_DATASET=production
```

#### 原因4: キャッシュの問題
**解決方法**:
```bash
# Next.jsキャッシュをクリア
rm -rf .next
npm run build
npm run dev
```

### Vercelデプロイが失敗する場合

#### ビルドエラー
- Vercelのログを確認
- ローカルで `npm run build` が成功するか確認
- 環境変数が正しく設定されているか確認

#### Runtime Error
- Vercelのログで実際のエラーメッセージを確認
- Sanity APIが正しく動作しているか確認（Sanity管理画面でAPIステータス確認）

---

## 📞 重要な情報

### プロジェクト情報
- **プロジェクト名**: ものがたりEC
- **Sanityプロジェクト**: なんちゃれ
- **プロジェクトID**: oa68x7h8
- **組織**: 山本祐貴

### 重要なURL
- **Sanity管理**: https://www.sanity.io/manage
- **GitHub**: https://github.com
- **Vercel**: https://vercel.com
- **QRコード生成**: https://www.qr-code-generator.com/

### サンプルデータ内容
- **職人**: 山田一郎（井波彫刻）、佐藤花子（五箇山和紙）
- **商品**: 欄間 鶴と松（¥280,000）、木彫りの小皿（¥8,500）、手漉き便箋セット（¥3,800）
- **ストーリー**: 井波彫刻の伝統、五箇山和紙の美しさ

---

## 💡 次のステップ提案

### すぐできること
1. データ表示確認
2. GitHubにプッシュ
3. Vercelデプロイ
4. QRコード生成

### 時間があれば
1. 実際の職人・商品の写真を追加
2. ストーリー記事を充実させる
3. スクローリーテリングセクションを追加
4. 商品埋め込みを活用した記事作成
5. トップページのデザイン改善

---

**次回作業開始時は、このメモとSETUP_MEMO.mdを確認してください！**
